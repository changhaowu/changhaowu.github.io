(window.webpackJsonp=window.webpackJsonp||[]).push([[54,50],{"1RVd":function(e,t,n){"use strict";n.r(t),n.d(t,"InlineComposeContainer",(function(){return p}));var r=n("97Jx"),a=n.n(r),o=n("ERkP"),i=n("GVND"),s=n("Ub51"),c=n("3xO4"),d=n.n(c),u=n("cHvH"),l=n("rHpw"),p=function(e){var t=e.getTweetHeight,n=e.history,r=e.location,c=e.richTextInputContext,l=e.typeaheadWrapper,p=e.parentTweetId,h=e.replyPressToggle;return o.createElement(u.a,null,(function(e){var u=e.windowWidth;return o.createElement(i.a.Consumer,null,(function(e){return o.createElement(d.a,{style:f.root},o.createElement(s.a,a()({},e,{getTweetHeight:t,history:n,isInline:!0,location:r,parentTweetId:p,replyPressToggle:h,richTextInputContext:c,typeaheadWrapper:l,windowWidth:u})))}))}))},f=l.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,zIndex:1}}}));t.default=p},M5JI:function(e,t,n){"use strict";n.r(t);var r=n("1RVd"),a=n("SADN");t.default=Object(a.a)(r.default)},SADN:function(e,t,n){"use strict";var r=n("97Jx"),a=n.n(r),o=n("ERkP"),i=n("RH6X"),s=n("rziq"),c=n("hHEM"),d=n("keCP"),u={convertEmojiToEntities:c.a.convertEmojiToEntities,element:d.a,initEditorState:c.a.initEditorState,insertTextAtCursor:c.a.insertTextAtCursor,updateOverflowStyle:c.a.updateOverflowStyle,dismissComposerCommandName:s.a,sendTweetCommandName:s.b};t.a=function(e){return function(t){return o.createElement(e,a()({},t,{richTextInputContext:u,typeaheadWrapper:i.a}))}}},XpKj:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return m}));n("PN9k");var r,a=n("kGix"),o=n("Ssj5"),i=n("oEOe"),s={fetchStatus:a.a.NONE,scheduledTweets:[]},c="FETCH_SCHEDULED_TWEETS",d=Object(i.a)("rweb/scheduledTweets",c),u="DELETE_SCHEDULED_TWEET",l=Object(i.a)("rweb/scheduledTweets",u);function p(e,t){switch(void 0===e&&(e=s),t.type){case d.SUCCESS:return Object.assign({},e,{fetchStatus:a.a.LOADED,scheduledTweets:t.payload});case d.FAILURE:return Object.assign({},e,{fetchStatus:a.a.FAILED});case d.REQUEST:return Object.assign({},e,{fetchStatus:a.a.LOADING});case l.SUCCESS:var n=t.meta;return n&&n.deleteScheduledTweetId?Object.assign({},e,{scheduledTweets:(r=n.deleteScheduledTweetId,o=e.scheduledTweets,o.filter((function(e){return e.rest_id!==r})))}):e;default:return e}var r,o}o.a.register(((r={}).scheduledTweets=p,r));var f=function(e){return e.scheduledTweets.scheduledTweets},h=function(e){return e.scheduledTweets.fetchStatus},g=function(){return function(e,t,n){var r=n.api;return Object(i.b)(e,{request:r.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:d,context:c}).then((function(){}))}},m=function(e){return function(t,n,r){var a=r.api;return Object(i.b)(t,{request:a.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:l,context:u,meta:{deleteScheduledTweetId:e}})}}},pcjM:function(e,t,n){"use strict";n.r(t),n.d(t,"Compose",(function(){return he}));var r=n("97Jx"),a=n.n(r),o=(n("NlgC"),n("LdEA")),i=n.n(o),s=(n("PN9k"),n("Y9Ll")),c=n.n(s),d=n("1Pcy"),u=n.n(d),l=n("W/Kd"),p=n.n(l),f=n("KEM+"),h=n.n(f),g=n("ERkP"),m=n("HPNB"),w=n("aWzz"),T=(n("VAZu"),n("Ub51")),S=n("zh9S"),E=n("ge3j"),_=n("pidX"),b=n("0KEI"),y=n("AspN"),R=n("XOJV"),C=n("G6rE"),v=n("oEGd"),D=n("hqKg"),I=n("rU/Q"),O=n("XpKj"),H=function(e){return function(t,n){var r=function(e,t){return t.location.state}(0,n);return r?e(r):void 0}},j=Object(D.createSelector)((function(e,t){return t.activeUser}),C.e.selectLoggedInUser,(function(e,t){return e||t})),x=function(e,t){var n=t.location.query;return n&&"string"==typeof n.in_reply_to?n.in_reply_to:void 0},A=H((function(e){return e.inReplyToStatusId})),B=function(e,t){return t.location.pathname.indexOf("/intent/")>-1},P=H((function(e){return e.defaultText})),k=H((function(e){return e.quotedStatus})),U=H((function(e){return e.isSelfThreadReply})),N=Object(D.createSelector)((function(e){return E.l(e,"")}),(function(e,t){var n=P(e,t);return Object(_.a)(t.location)||n}),(function(e,t){return t.quotedStatus?t.quotedStatus:k(e,t)}),y.f,B,(function(e,t,n,r,a){return e.map((function(e,o){return Object.assign({},function(e){e.mediaIds,e.cardUrl;return i()(e,["mediaIds","cardUrl"])}(e),{media:r.filter((function(t){return e.mediaIds.some((function(e){return e===t.id}))})),quotedStatus:0===o?n:void 0,text:0===o&&t&&!a?t:e.text})}))})),M=Object(D.createStructuredSelector)({activeUser:j,composerData:N,draftTweets:I.e,inReplyToStatus:function(e,t){var n=x(0,t)||A(e,t);return n?R.a.selectHydrated(e,n):void 0},inReplyToStatusId:x,isIntentRoute:B,isSelfThreadReply:U,isSending:function(e){return E.o(e,"")},scheduledTweets:O.f,sendingProgress:E.q,composeSemanticCoreId:H((function(e){return e.composeSemanticCoreId}))}),V={createDraftTweetApiErrorHandler:Object(b.d)(I.d),createScheduledTweetApiErrorHandler:Object(b.d)(O.d),googleAnalyticsPageView:S.a,scribePageImpression:S.d,fetchScheduledTweets:O.c,fetchDraftTweets:I.c},W=Object(v.g)(M,V),q=n("RgK2"),L=n.n(q),J=n("wrlS"),z=n("jHSc"),Q=n("MXY2"),F=n("3XMw"),K=n.n(F),X=n("iFPY"),G=n("QbaN"),Y=n("oQhu"),Z=n("7nmT"),$=n.n(Z),ee=n("Dtul"),te=n("7JQg"),ne="tweetButton",re=n("3xO4"),ae=n.n(re),oe=n("/yvb"),ie=n("JYMr"),se=n("cHvH"),ce=n("rHpw"),de=K.a.jcfbdafa,ue=K.a.d367e1fd,le={page:"compose"},pe={page:"compose",section:"reply"},fe={context:"compose_intent_logged_in"},he=function(e){function t(t){var n;return n=e.call(this,t)||this,h()(u()(n),"state",{isValid:!1}),h()(u()(n),"_handleAppBarHeight",Object(Y.a)((function(){var e=$.a.findDOMNode(n._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50}))),h()(u()(n),"_handleBackClick",(function(){n._composeContainerRef&&n._composeContainerRef.handleDismissComposer()})),h()(u()(n),"_handleCloseComposer",(function(){n._appBarRef&&n._appBarRef.goBack()})),h()(u()(n),"_handleSendTweet",(function(){n._composeContainerRef&&n._composeContainerRef.handleTweetOrRetweet()})),h()(u()(n),"_setValidity",(function(e){e!==n.state.isValid&&n.setState({isValid:e})})),h()(u()(n),"_getScribeNamespace",(function(){return n.props.inReplyToStatus||n.props.inReplyToStatusId?pe:le})),h()(u()(n),"_getScribeData",(function(){var e=n.props,t=e.activeUser;return e.isIntentRoute&&t?fe:L.a})),h()(u()(n),"_renderAppBarRightControl",(function(){var e=n.state.isValid,t=n.context.isModal,r=n.props,a=r.inReplyToStatus,o=r.isSelfThreadReply,i=r.isSending,s=r.activeUser,c=e||n.isRetweet;return t?void 0:g.createElement(oe.a,{disabled:!c||i||!s,onPress:n._handleSendTweet,size:"normalCompact",testID:ne,type:"primary"},Object(Q.a)({inReplyToStatus:!!a,isSelfThreadReply:!!o,isQuoteTweet:!!n.isQuoteTweet,isRetweet:!!n.isRetweet,isScheduled:!!n.isScheduled,isThread:n.isThread}))})),h()(u()(n),"_renderHeaderWithProgressBar",(function(e){var t=n.context.isModal,r=n.props,a=r.sendingProgress,o=r.isSending;return g.createElement(g.Fragment,null,g.createElement(ie.a,{progress:o?Math.max(a,.02):0,style:[ge.progressBar,t&&ge.progressBarModal]}),e)})),h()(u()(n),"_renderUnsentHeading",(function(){var e=n.props,t=e.draftTweets,r=e.scheduledTweets;if(n._tweetSchedulingEnabled&&r.length>0||n._tweetDraftsEnabled&&t.length>0)return g.createElement(ae.a,{style:ge.unsentHeadingContainer},g.createElement(oe.a,{onPress:n._handleOpenUnsent,size:"normalCompact",type:"text"},ue))})),h()(u()(n),"_handleOpenUnsent",(function(){var e=n.props.history;Object(S.c)(Object.assign({},n._getScribeNamespace(),{element:"unsent_tweets",action:"click"})),n._tweetDraftsEnabled?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled")})),h()(u()(n),"_setAppBarRef",(function(e){n._appBarRef=e})),h()(u()(n),"_handleComposeContainerRef",(function(e){n._composeContainerRef=e})),n._tweetSchedulingEnabled=J.a.isTrue("responsive_web_scheduling_enabled"),n._tweetDraftsEnabled=J.a.isTrue("responsive_web_tweet_drafts_enabled"),n}p()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.createDraftTweetApiErrorHandler,n=e.createScheduledTweetApiErrorHandler,r=e.fetchDraftTweets,a=e.fetchScheduledTweets,o=e.googleAnalyticsPageView,i=e.scribePageImpression,s=this._getScribeNamespace();i(s),o(s),this._unlockReload=ee.a.acquire(),this._tweetSchedulingEnabled&&a().catch(n()),this._tweetDraftsEnabled&&r().catch(t())},n.componentWillUnmount=function(){this._unlockReload()},n.render=function(){var e=this,t=this.props,n=(t.createDraftTweetApiErrorHandler,t.createScheduledTweetApiErrorHandler,t.draftTweets,t.fetchDraftTweets,t.fetchScheduledTweets,t.history),r=t.location,o=t.activeUser,s=(t.composerData,t.googleAnalyticsPageView,t.inReplyToStatus,t.inReplyToStatusId,t.isIntentRoute),c=(t.isSelfThreadReply,t.isSending,t.match,t.scheduledTweets,t.scribePageImpression,t.sendingProgress,t.staticContext,i()(t,["createDraftTweetApiErrorHandler","createScheduledTweetApiErrorHandler","draftTweets","fetchDraftTweets","fetchScheduledTweets","history","location","activeUser","composerData","googleAnalyticsPageView","inReplyToStatus","inReplyToStatusId","isIntentRoute","isSelfThreadReply","isSending","match","scheduledTweets","scribePageImpression","sendingProgress","staticContext"])),d=s&&!o;return g.createElement(te.b,{data:this._getScribeData(),namespace:this._getScribeNamespace()},g.createElement(se.a,null,(function(t){var i=t.windowWidth,s=d&&m.a.shouldRenderAsModal(i);return g.createElement(g.Fragment,null,d&&g.createElement(X.a,{history:n,location:r}),!s&&g.createElement(z.b,{appBarRef:e._setAppBarRef,documentTitle:de,hideBackButton:!1,history:n,location:r,middleControl:e._renderUnsentHeading(),onBackClick:e._handleBackClick,renderHeader:e._renderHeaderWithProgressBar,rightControl:e._renderAppBarRightControl()},g.createElement(T.a,a()({},c,{activeUser:o,history:n,location:r,onCloseComposer:e._handleCloseComposer,onHandleAppBarHeight:e._handleAppBarHeight,onRef:e._handleComposeContainerRef,setValidity:e._setValidity,windowWidth:i}))))})))},c()(t,[{key:"isThread",get:function(){return this.props.composerData.length>1}},{key:"isRetweet",get:function(){var e=this.props.composerData,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}},{key:"isQuoteTweet",get:function(){var e=this.props.composerData;return!this.isThread&&e[0].quotedStatus}},{key:"isScheduled",get:function(){var e=this.props.composerData;return this._tweetSchedulingEnabled&&Object(G.h)(e[0].scheduledFor)}}]),t}(g.Component);h()(he,"contextTypes",{isModal:w.bool});var ge=ce.a.create((function(e){return{progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.medium,borderTopRightRadius:e.borderRadii.medium,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},unsentHeadingContainer:{marginLeft:"auto"}}}));t.default=W(he)},ynU0:function(e,t,n){"use strict";n.r(t);var r=n("pcjM"),a=n("SADN");t.default=Object(a.a)(r.default)}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web/bundle.RichTextCompose.f8a82184.js.map